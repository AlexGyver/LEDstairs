# LEDstairs
Контроллер подсветки лестницы на Arduino  

## Новые функции в прошивке 1.2 (BETA)
***
### Разное количество диодов на ступеньку
```c
#define STRIP_LED_AMOUNT 256  // кол-во светодиодов на всех ступеньках
#define STEP_AMOUNT 16        // количество ступенек

// описание всех ступенек с возможностью подсветки ЛЮБЫХ ступенек в ночном режиме
Step steps[STEP_AMOUNT] = { 
{ 0, 16, true },    // первая ступенька начинается с диода 0, всего диодов на ступенке 16, true - подсвечивается в ночном режиме
{ 16, 16, false },  // вторая ступенька начинается с диода 16 (первая 0-15), всего диодов на ступенке 16, false - не подсвечивается в ночном режиме
...
};
```
### Сенсорная кнопка для переключения эффектов
```c
#define BUTTON  0      // вкл(1)/выкл(0) - сенсорная кнопка переключения эффектов

#define BUTTON_PIN 6     // пин сенсорной кнопки переключения эффектов

```
## Новые функции в прошивке 1.1
***
### поддержка **ночного режима**. Подсвечиваются крайние ступеньки.
  Настройка:
  * маска (какие диоды на ступеньке включать) NIGHT_LIGHT_BIT_MASK
  * цвет NIGHT_LIGHT_COLOR
  * яркость NIGHT_LIGHT_BRIGHT

```c
int16_t NIGHT_LIGHT_BIT_MASK = 0b0100100100100100;  // последовательность диодов в ночном режиме, чтобы диоды не выгорали
#define NIGHT_LIGHT_COLOR mCOLOR(WHITE)  // по умолчанию белый
#define NIGHT_LIGHT_BRIGHT 10  // 0 - 255
```
Чтобы не выжигать одни и теже диоды, маска инвертируется каждые 60 секунд  
Цвет ночной подсветки можно определить через функции библиотеки microLED:
* mCOLOR(WHITE) или SILVER,GRAY,BLACK,RED,MAROON,ORANGE,YELLOW,OLIVE,LIME,GREEN,AQUA,TEAL,BLUE,NAVY,MAGENTA,PURPLE
* mRGB(byte r, byte g, byte b);   // RGB 255, 255, 255
* mWHEEL(int color);              // цвета 0-1530
* mHEX(uint32_t color);           // HEX цвет
* mHSV(byte h, byte s, byte v);   // HSV 255, 255, 255

***
### включение только при минимальной освещённости

***
### включение подсветки по одному из датчиков движения, а выключение только по таймеру  
Т.е. все остальные срабатывания датчиков игнорируются

***
### подсветка перил  (по умолчанию отключена)  
Настройки:
```c
#define RAILING 0      // вкл(1)/выкл(0) - подсветка перил
#define RAILING_LED_AMOUNT 50    // количество чипов WS2811 на ленте перил
#define RAILING_PIN 11    // пин ленты перил
```
Вся лента перил делится на сегменты. Их столько же, сколько и ступенек.
На каждом сегменте перил отрисовывается тот же эффект, что и на соответствующей ступеньке.
Ночная подсветка также подсвечивает крайние сегменты перил

---
Автор: Геннадий Дегтерёв  
gennadij@degterjow.de


* Основная страница оригинального проекта здесь https://alexgyver.ru/ledstairs/

